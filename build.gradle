plugins {
    id 'org.spongepowered.plugin' version '0.8.1'
    id 'com.github.johnrengelman.shadow' version '2.0.1'
    id 'java'
    id 'application'
}

group = 'com.magitechserver.magibridge'
version = '2.4'
description = 'A utility Discord <-> Minecraft chat relay plugin'
mainClassName = 'com.magitechserver.magibridge.MagiBridge'
compileJava.options.encoding = 'UTF-8'

dependencies {
    compileOnly 'org.spongepowered:spongeapi:6.0.0'
    compileOnly 'io.github.nucleuspowered:nucleus-api:1.1.1-S5.1'
    compileOnly 'me.lucko.luckperms:luckperms-api:3.2'
    compileOnly 'br.net.fabiozumbi12.UltimateChat:UltimateChat-Sponge-5.0-6.0:1.8.1'
    compileOnly files('libs/boop.jar')
    compileOnly files('libs/mcclans.jar')

    compile 'com.mashape.unirest:unirest-java:1.4.9'
    compile 'net.dv8tion:JDA:3.3.1_284'
    compile 'com.vdurmont:emoji-java:3.3.0'
    compile 'org.json:json:20160810'
    compile 'com.squareup.okhttp3:okhttp:3.8.1'
}

repositories {
    mavenCentral()
    jcenter()
    maven { url = "http://repo.drnaylor.co.uk/artifactory/list/minecraft" }
    maven { url = "https://repo.lucko.me/" }
    maven { url = "https://raw.github.com/FabioZumbi12/UltimateChat/mvn-repo/" }
}

shadowJar {
    relocate 'org.apache', 'shaded.apache'
    relocate 'org.json', 'shaded.org.json'
    dependencies {
        include(dependency('net.dv8tion:JDA:3.3.1_284'))
        include(dependency('com.vdurmont:emoji-java:3.3.0'))
        include(dependency('com.mashape.unirest:unirest-java:1.4.9'))
        include(dependency('org.json:json:20160810'))
        include(dependency('com.squareup.okhttp3:okhttp:3.8.1'))
    }
    baseName = 'MagiBridge'
}
